<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tommaso Rigon">

<title>Statistica I</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="exe_5_bis_files/libs/clipboard/clipboard.min.js"></script>
<script src="exe_5_bis_files/libs/quarto-html/quarto.js"></script>
<script src="exe_5_bis_files/libs/quarto-html/popper.min.js"></script>
<script src="exe_5_bis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="exe_5_bis_files/libs/quarto-html/anchor.min.js"></script>
<link href="exe_5_bis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="exe_5_bis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="exe_5_bis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="exe_5_bis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="exe_5_bis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-full">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Indice</h2>
   
  <ul>
  <li><a href="#homepage" id="toc-homepage" class="nav-link active" data-scroll-target="#homepage">Homepage</a>
  <ul class="collapse">
  <li><a href="#esercizio-a" id="toc-esercizio-a" class="nav-link" data-scroll-target="#esercizio-a">Esercizio A</a></li>
  <li><a href="#esercizio-b" id="toc-esercizio-b" class="nav-link" data-scroll-target="#esercizio-b">Esercizio B</a></li>
  <li><a href="#esercizio-c---regressione-con-variabili-standardizzate" id="toc-esercizio-c---regressione-con-variabili-standardizzate" class="nav-link" data-scroll-target="#esercizio-c---regressione-con-variabili-standardizzate">Esercizio C - Regressione con variabili standardizzate</a></li>
  <li><a href="#esercizio-d---i-dati-di-anscombe" id="toc-esercizio-d---i-dati-di-anscombe" class="nav-link" data-scroll-target="#esercizio-d---i-dati-di-anscombe">Esercizio D - I dati di Anscombe</a></li>
  <li><a href="#esercizio-e" id="toc-esercizio-e" class="nav-link" data-scroll-target="#esercizio-e">Esercizio E</a></li>
  <li><a href="#esercizio-f-difficile" id="toc-esercizio-f-difficile" class="nav-link" data-scroll-target="#esercizio-f-difficile">Esercizio F (difficile)</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Statistica I</h1>
<p class="subtitle lead">Esercizi 5: covarianza, correlazione, regressione lineare semplice</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Autore/Autrice</div>
  <div class="quarto-title-meta-heading">Affiliazione</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><span class="orange">Tommaso Rigon</span> </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <em>Università degli Studi di Milano-Bicocca</em>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  

</header>

<section id="homepage" class="level1">
<h1><a href="../index.html">Homepage</a></h1>
<section id="esercizio-a" class="level2">
<h2 class="anchored" data-anchor-id="esercizio-a">Esercizio A</h2>
<p>Nella figura che segue sono riportati i diagrammi a dispersione di <span class="math inline">4</span> coppie di variabili. Ad esse corrispondono i coefficienti di correlazione <span class="math inline">\rho</span> pari a <span class="math inline">-1,0,0.7,0.9</span>. Si dica a quale grafico corrisponde ciascun coefficiente.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="exe_5_bis_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="1600"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="esercizio-b" class="level2">
<h2 class="anchored" data-anchor-id="esercizio-b">Esercizio B</h2>
<p>La tabella seguente esprime il peso (in chili) e l’altezza (in centimetri) di <span class="math inline">n = 20</span> persone adulte di sesso maschile.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">Altezza</th>
<th style="text-align: right;">Peso</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">177</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: right;">172</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="odd">
<td style="text-align: right;">181</td>
<td style="text-align: right;">72</td>
</tr>
<tr class="even">
<td style="text-align: right;">176</td>
<td style="text-align: right;">66</td>
</tr>
<tr class="odd">
<td style="text-align: right;">177</td>
<td style="text-align: right;">73</td>
</tr>
<tr class="even">
<td style="text-align: right;">174</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="odd">
<td style="text-align: right;">173</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="even">
<td style="text-align: right;">176</td>
<td style="text-align: right;">80</td>
</tr>
<tr class="odd">
<td style="text-align: right;">172</td>
<td style="text-align: right;">74</td>
</tr>
<tr class="even">
<td style="text-align: right;">174</td>
<td style="text-align: right;">76</td>
</tr>
<tr class="odd">
<td style="text-align: right;">180</td>
<td style="text-align: right;">70</td>
</tr>
<tr class="even">
<td style="text-align: right;">172</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="odd">
<td style="text-align: right;">176</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="even">
<td style="text-align: right;">175</td>
<td style="text-align: right;">77</td>
</tr>
<tr class="odd">
<td style="text-align: right;">181</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="even">
<td style="text-align: right;">165</td>
<td style="text-align: right;">61</td>
</tr>
<tr class="odd">
<td style="text-align: right;">178</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: right;">193</td>
<td style="text-align: right;">110</td>
</tr>
<tr class="odd">
<td style="text-align: right;">172</td>
<td style="text-align: right;">72</td>
</tr>
<tr class="even">
<td style="text-align: right;">183</td>
<td style="text-align: right;">81</td>
</tr>
</tbody>
</table>
<ol type="1">
<li><p>Si forniscano delle opportune misure che descrivono la distribuzione della variabile peso.</p></li>
<li><p>La variabile peso risulta asimmetrica?</p></li>
<li><p>Si disegni un opportuno grafico che descriva la distribuzione della variabile peso.</p></li>
<li><p>La conoscenza dell’altezza degli individui permette una migliore descrizione del peso? Si risponda qualitativamente tramite un grafico.</p></li>
<li><p>Si fornisca la funzione di regressione del peso (<span class="math inline">y</span>) rispetto all’altezza (<span class="math inline">x</span>). Tale modello si adatta bene ai dati?</p></li>
<li><p>C’è un individuo che presenta un residuo elevato? Quale?</p></li>
<li><p>Quanto vale la varianza dei residui?</p></li>
<li><p>Se si eliminasse dall’analisi tale individuo i risultati cambierebbero in maniera rilevante? Possiamo dire che in questo caso la retta si adatta meglio?</p></li>
</ol>
</section>
<section id="esercizio-c---regressione-con-variabili-standardizzate" class="level2">
<h2 class="anchored" data-anchor-id="esercizio-c---regressione-con-variabili-standardizzate">Esercizio C - Regressione con variabili standardizzate</h2>
<p>Si considerino due variabili statistiche <span class="math inline">x</span> ed <span class="math inline">y</span> e siano <span class="math inline">\hat{\alpha}</span> e <span class="math inline">\hat{\beta}</span> le stime ai minimi quadrati dei parametri del modello di regressione <span class="math inline">y = \alpha + \beta x</span>.</p>
<p>Si considerino quindi le variabili <span class="math display">
z_i = \frac{x_i − \bar{x}}{\sigma_x}, \qquad w_i = \frac{y_i - \bar{y}}{\sigma_y},\qquad i=1,\dots,n.
</span> Inoltre, si consideri il modello di regressione <span class="math inline">w = \gamma + \delta z</span>.</p>
<hr>
<ol type="1">
<li><p>Si ottengano i coefficienti ai minimi quadrati <span class="math inline">\hat{\gamma}</span> e <span class="math inline">\hat{\delta}</span>.</p></li>
<li><p>Cosa si può dire circa le devianze residui dei due modelli? E degli indici <span class="math inline">R^2</span>?</p></li>
</ol>
</section>
<section id="esercizio-d---i-dati-di-anscombe" class="level2">
<h2 class="anchored" data-anchor-id="esercizio-d---i-dati-di-anscombe">Esercizio D - I dati di Anscombe</h2>
<p>Sono date le seguenti osservazioni da 4 regressori e 4 variabili dipendenti</p>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 17%">
<col style="width: 14%">
<col style="width: 17%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">x^{(1)}</span></th>
<th style="text-align: right;"><span class="math inline">x^{(2)}</span></th>
<th style="text-align: right;"><span class="math inline">x^{(3)}</span></th>
<th style="text-align: right;"><span class="math inline">x^{(4)}</span></th>
<th style="text-align: right;"><span class="math inline">y^{(1)}</span></th>
<th style="text-align: right;"><span class="math inline">y^{(2)}</span></th>
<th style="text-align: right;"><span class="math inline">y^{(3)}</span></th>
<th style="text-align: right;"><span class="math inline">y^{(4)}</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">8.04</td>
<td style="text-align: right;">9.14</td>
<td style="text-align: right;">7.46</td>
<td style="text-align: right;">6.58</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">6.95</td>
<td style="text-align: right;">8.14</td>
<td style="text-align: right;">6.77</td>
<td style="text-align: right;">5.76</td>
</tr>
<tr class="odd">
<td style="text-align: right;">13</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">8.74</td>
<td style="text-align: right;">12.74</td>
<td style="text-align: right;">7.71</td>
</tr>
<tr class="even">
<td style="text-align: right;">9</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">8.81</td>
<td style="text-align: right;">8.77</td>
<td style="text-align: right;">7.11</td>
<td style="text-align: right;">8.84</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">8.33</td>
<td style="text-align: right;">9.26</td>
<td style="text-align: right;">7.81</td>
<td style="text-align: right;">8.47</td>
</tr>
<tr class="even">
<td style="text-align: right;">14</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">9.96</td>
<td style="text-align: right;">8.10</td>
<td style="text-align: right;">8.84</td>
<td style="text-align: right;">7.04</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">7.24</td>
<td style="text-align: right;">6.13</td>
<td style="text-align: right;">6.08</td>
<td style="text-align: right;">5.25</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">4.26</td>
<td style="text-align: right;">3.10</td>
<td style="text-align: right;">5.39</td>
<td style="text-align: right;">12.50</td>
</tr>
<tr class="odd">
<td style="text-align: right;">12</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">10.84</td>
<td style="text-align: right;">9.13</td>
<td style="text-align: right;">8.15</td>
<td style="text-align: right;">5.56</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">4.82</td>
<td style="text-align: right;">7.26</td>
<td style="text-align: right;">6.42</td>
<td style="text-align: right;">7.91</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">5.68</td>
<td style="text-align: right;">4.74</td>
<td style="text-align: right;">5.73</td>
<td style="text-align: right;">6.89</td>
</tr>
</tbody>
</table>
<hr>
<ol type="1">
<li><p>Si calcoli il coefficiente di correlazione per ciascuna delle coppie di variabili <span class="math inline">x^{(j)}</span> e <span class="math inline">y^{(j)}</span>, per <span class="math inline">j=1,\dots,4</span>.</p></li>
<li><p>Si disegni il grafico a dispersione per ciascuna coppia di variabili considerata al punto precedente. Si commentino i risultati ottenuti in relazione al punto precedente.</p></li>
</ol>
</section>
<section id="esercizio-e" class="level2">
<h2 class="anchored" data-anchor-id="esercizio-e">Esercizio E</h2>
<p>È opinione diffusa che il consumo di bevande alcoliche sia una delle principali cause di incidenti automobilistici. Con l’obiettivo di verificare una tale opinione, nella tabella seguente vengono forniti il numero di incidenti avvenuti nell’intera rete stradale nelle diverse regioni italiane e la percentuale di persone che consumano di vino per ogni regione.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Regione</th>
<th style="text-align: right;">Incidenti</th>
<th style="text-align: right;">Vino</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Piemonte</td>
<td style="text-align: right;">4019</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="even">
<td style="text-align: left;">Valle d’Aosta</td>
<td style="text-align: right;">14707</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lombardia</td>
<td style="text-align: right;">407</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">Trentino-A.Adige</td>
<td style="text-align: right;">46798</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Veneto</td>
<td style="text-align: right;">3200</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="even">
<td style="text-align: left;">Friuli-Venezia-Giulia</td>
<td style="text-align: right;">18268</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Liguria</td>
<td style="text-align: right;">5164</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="even">
<td style="text-align: left;">Emilia Romagna</td>
<td style="text-align: right;">9133</td>
<td style="text-align: right;">61</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Toscana</td>
<td style="text-align: right;">23531</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="even">
<td style="text-align: left;">Umbria</td>
<td style="text-align: right;">19869</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Marche</td>
<td style="text-align: right;">3614</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lazio</td>
<td style="text-align: right;">7556</td>
<td style="text-align: right;">54</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Abruzzo</td>
<td style="text-align: right;">27377</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="even">
<td style="text-align: left;">Molise</td>
<td style="text-align: right;">4725</td>
<td style="text-align: right;">50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Campania</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">50</td>
</tr>
<tr class="even">
<td style="text-align: left;">Puglia</td>
<td style="text-align: right;">9372</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Basilicata</td>
<td style="text-align: right;">9315</td>
<td style="text-align: right;">53</td>
</tr>
<tr class="even">
<td style="text-align: left;">Calabria</td>
<td style="text-align: right;">741</td>
<td style="text-align: right;">50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sicilia</td>
<td style="text-align: right;">3602</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sardegna</td>
<td style="text-align: right;">12685</td>
<td style="text-align: right;">49</td>
</tr>
</tbody>
</table>
<ol type="1">
<li><p>Attraverso un grafico, opportunamente commentato, si dia una prima valutazione sulla verifica della relazione sotto studio.</p></li>
<li><p>Si costruisca e si stimi un semplice modello lineare che descriva la relazione tra le variabili vino (variabile <span class="math inline">x</span>) ed incidenti (variabile <span class="math inline">y</span>).</p></li>
<li><p>Si fornisca una misura della qualità del modello per descrivere i dati disponibili.</p></li>
<li><p>Si discuta sulla sensatezza dei risultati ottenuti, considerando in particolare le stime ottenute per i parametri.</p></li>
</ol>
</section>
<section id="esercizio-f-difficile" class="level2">
<h2 class="anchored" data-anchor-id="esercizio-f-difficile">Esercizio F (difficile)</h2>
<p>Per <span class="math inline">n = 10</span> paesi dell’Unione Europea si è osservato il prezzo in euro di un litro di benzina (variabile <span class="math inline">x</span>) ed il numero di veicoli pro-capite circolanti (variabile <span class="math inline">y</span>). I dati si riferiscono alla fine degli anni <span class="math inline">'90</span>. Si conoscono i seguenti risultati: <span class="math display">
\sum_{i=1}^nx_i = 8.79, \qquad \sum_{i=1}^ny_i = 8.63, \qquad \frac{1}{n}\sum_{i=1}^nx_i^2 = 0.77385, \qquad \frac{1}{n}\sum_{i=1}^ny_i^2 = 0.7695.
</span> Inoltre, è noto che la somma dei residui al quadrato del modello di regressione <span class="math inline">y = \alpha + \beta x</span> sono pari a</p>
<p><span class="math display">
\sum_{i=1}^nr_i^2 = 0.01157.
</span></p>
<hr>
<p>Sulla base di queste informazioni, si ottengano le stime ai minimi quadrati <span class="math inline">\hat{\alpha}</span> e <span class="math inline">\hat{\beta}</span> e si ottenga un indice di bontà di adattamento. Si assuma inoltre che le variabili <span class="math inline">x</span> ed <span class="math inline">y</span> siano negativamente correlate.</p>
<p><span class="blue">Suggerimento</span>. Si cominci ottenendo il valore <span class="math inline">R^2</span> e si ragioni quindi sulla definizione di <span class="math inline">\hat{\beta}</span>.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiato!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiato!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="exe_5_bis_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>